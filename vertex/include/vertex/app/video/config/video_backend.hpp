#pragma once

#include "vertex/config/os.hpp"
#include "vertex/config/platform.hpp"

///////////////////////////////////////////////////////////////////////////////
// windows
///////////////////////////////////////////////////////////////////////////////

#if !defined(_VX_VIDEO_BACKEND_DETECTED) && defined(VX_OS_WINDOWS)

#   define VX_VIDEO_BACKEND_WINDOWS
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // windows

///////////////////////////////////////////////////////////////////////////////
// wayland
///////////////////////////////////////////////////////////////////////////////

// Newer Linux display protocol (used by GNOME, KDE, etc.)
#if defined(VX_VIDEO_BACKEND_PREFER_WAYLAND) && !defined(_VX_VIDEO_BACKEND_DETECTED) && defined(VX_OS_LINUX)

#   define VX_VIDEO_BACKEND_WAYLAND
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // wayland

///////////////////////////////////////////////////////////////////////////////
// x11
///////////////////////////////////////////////////////////////////////////////

// Commonly used on Linux and BSD desktop systems
#if !defined(_VX_VIDEO_BACKEND_DETECTED) && \
    (defined(VX_OS_LINUX) || defined(VX_OS_BSD))

#   define VX_VIDEO_BACKEND_X11
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // x11

///////////////////////////////////////////////////////////////////////////////
// cocoa
///////////////////////////////////////////////////////////////////////////////

// macOS native display system
#if !defined(_VX_VIDEO_BACKEND_DETECTED) && defined(VX_OS_MACOS)

#   define VX_VIDEO_BACKEND_COCOA
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // cocoa

///////////////////////////////////////////////////////////////////////////////
// ios (UIKit)
///////////////////////////////////////////////////////////////////////////////

// iOS uses UIKit instead of Cocoa
#if !defined(_VX_VIDEO_BACKEND_DETECTED) && defined(VX_OS_IOS)

#   define VX_VIDEO_BACKEND_UIKIT
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // ios (uikit)

///////////////////////////////////////////////////////////////////////////////
// android
///////////////////////////////////////////////////////////////////////////////

#if !defined(_VX_VIDEO_BACKEND_DETECTED) && defined(VX_OS_ANDROID)

#   define VX_VIDEO_BACKEND_ANDROID
#   define _VX_VIDEO_BACKEND_DETECTED

#endif // android

///////////////////////////////////////////////////////////////////////////////
// dummy / fallback
///////////////////////////////////////////////////////////////////////////////

#if !defined(_VX_VIDEO_BACKEND_DETECTED)

#   define VX_VIDEO_BACKEND_DUMMY
#   define _VX_VIDEO_BACKEND_DETECTED

#endif

///////////////////////////////////////////////////////////////////////////////
// platform type detection
///////////////////////////////////////////////////////////////////////////////

#if defined(VX_OS_ANDROID) || defined(VX_OS_IOS)
#   define VX_PLATFORM_MOBILE 1
#   define VX_PLATFORM_DESKTOP 0
#else
#   define VX_PLATFORM_MOBILE 0
#   define VX_PLATFORM_DESKTOP 1
#endif

///////////////////////////////////////////////////////////////////////////////
// cleanup
///////////////////////////////////////////////////////////////////////////////

#if defined(_VX_VIDEO_BACKEND_DETECTED)
#   undef _VX_VIDEO_BACKEND_DETECTED
#endif